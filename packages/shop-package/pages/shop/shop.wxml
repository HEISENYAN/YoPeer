
<!--pages/shop/shop.wxml-->
<view class = "menu-page">
  <!--é¡¶éƒ¨è¿”å›æŒ‰é’®-->
  <return-button></return-button>

  <div class="head-image-container">
    <view class="text-heading-area1">
      <view class="text-heading1">ğŸ¥é±¼é¥¼ YoPeer</view>
      <view class="text-heading2">ğŸ›ï¸2024Fallæ¸¯æ ¡æ–°ç”Ÿå›¢è´­æ´»åŠ¨</view>
    </view>
    <view class="text-heading3"><button style = "background-color: transparent; border-color: transparent; color: white;font-size: 28rpx;font-weight: 200;"open-type = "contact">è”ç³»å®¢æœ&gt;</button></view>
  </div>
  <t-notice-bar visible="{{true}}"prefix-icon	="{{false}}" bindtap = "showPopup" content="ä¸‹å•å‰è¯·ä»”ç»†é˜…è¯»è´­å‰é¡»çŸ¥ï¼Œç‚¹å‡»æŸ¥çœ‹è´­å‰é¡»çŸ¥>"></t-notice-bar>
  <!--å·¦ä¾§ä¸€çº§èœå•-->
  <view class = "menu-content">   
    <view class = "menu-container">
      <scroll-view class = "scroll-view" type = "list" >
        <view class = "scorll-view-list">
          <block wx:for ="{{YPproduct}}" wx:for-item = "item" wx:key = "index">
            <block wx:if = "{{index == 1||index == 0}}">
              <view class="scroll-view-item {{indexSize === index?'active':''}}" style = "color:red;font-weight:{{indexSize === index?'bold':'bolder'}}" bindtap="chooseTypes" data-nowindex="{{index}}">{{item.classification}}</view>
            </block>
            <block wx:if = "{{index != 1 && index != 0}}">
              <view class="scroll-view-item {{indexSize === index?'active':''}}" bindtap="chooseTypes" data-nowindex="{{index}}">{{item.classification}}</view>
            </block>
            
          </block>
        </view>
      </scroll-view>
    </view>
  
  <!--å³ä¾§äºŒçº§èœå•-->
    <scroll-view scroll-y style="width: 100%; height: 100%; background-color:rgb(248, 248, 248);" type="custom" scroll-into-view="{{scrollIntoView}}"  bindscroll ="scrollDetection">
      <sticky-section wx:for="{{YPproduct}}" wx:key = "key" wx:for-item = "item" >
        <sticky-header>
          <view class="header" id = "menuIndex{{index}}">{{item.classification}}</view>
        </sticky-header>
        <list-view class = "item-list" wx:if = "{{index == 0}}">
          <view class="shopping-item" catchtap = "onTapChange"> 
            <view class="shopping-image" >
              <image style = "border-radius: 10rpx; height: 180rpx; width: 220rpx;" src="cloud://yopeer-0g9zeq1439bcebc2.796f-yopeer-0g9zeq1439bcebc2-1326224258/æ–°ç”Ÿå›¢è´­å•†å“ä»‹ç»ç¼©ç•¥å›¾/è·³è½¬è‡³ä¸€çº§ç›®å½•ï¼šåºŠä¸Šç”¨å“.jpg" > </image>
            </view>
            <view class="shopping-info-container">
              <text class = "shopping-item-title" max-lines = "{{5}}" overflow = "ellipsis" >åºŠä¸Šç”¨å“ä¸“åŒº{{'\n'}}ç‚¹å‡»ç«‹å³å‰å¾€</text>
              
            </view>
            
          </view>
        </list-view>
        <list-view class = "item-list">
          <view class="shopping-item" wx:for="{{item.items}}" bindtap="chooseSecondMenu" wx:key="prodIndex" wx:for-item="prodItem" data-selected="{{prodItem.product_id}}"> 
            <view class="shopping-image" >
              <image style = "border-radius: 10rpx; height: 180rpx; width: 220rpx;" src="{{prodItem.thumbnailUrl}}" > </image>
            </view>
            <view class="shopping-info-container" >
              <text class = "shopping-item-title" max-lines = "{{2}}" overflow = "ellipsis" >{{prodItem.prodName}}</text>
              <text class = "shopping-item-title" max-lines = "{{2}}" overflow = "ellipsis" style = "color:gray;text-decoration: line-through;" >ï¿¥{{prodItem.originalPrice/100}}</text>
              <text class = "shopping-item-title" max-lines = "{{2}}" overflow = "ellipsis" style = "color:red" >ï¿¥{{prodItem.price/100}}èµ·</text>
            </view>
            <view class = "choose-button">é€‰è§„æ ¼</view>
          </view>
          <!--<block  wx:for="{{item.items}}" bindtap="chooseSecondMenu" wx:key="prodIndex" wx:for-item="prodItem" data-selected="{{prodItem}}">
            <van-card<view class = "choose-button" data-selected="{{prodItem}}">é€‰è§„æ ¼</view>
              bindtap="chooseSecondMenu"
              data-selected="{{prodItem}}"
              num=""
              price="{{prodItem.price}}"
              desc="{{prodItem.prodName}}"
              title="{{prodItem.prodName}}"
              thumb="{{ prodItem.thumbnailUrl}}"
            />
          </block>-->
        </list-view>
      </sticky-section>
    </scroll-view>
  </view>
    
  <!--åº•éƒ¨è´­ç‰©è½¦-->
  <view style="z-index: 2; position:relative">
    <mp-half-screen screenHeight="50" id="shoppingCart" style="z-index:10000" bindtouchend="moveCart">
      <view slot="tab" class="cart-bar" bindtap="openCart">
        <view class="cart-icon" style="position:relative;">
          <image style="height: 50rpx; width: 50rpx;" src="https://i.postimg.cc/T2NFhQQ2/We-Chat71b9eb668c0868cde41149edfca8e03e.jpg"></image>
          <view wx:if="{{cartItemCount > 0}}" class="cart-item-count">{{cartItemCount}}</view> <!-- æ–°å¢çš„æ•°å­—å›¾æ ‡ -->
        </view>
        <view class="cart-price">ï¿¥{{cartPrice/100}}</view>
        <view class="check-out-button"><view class="theButton" catchtap="checkOut">{{YPproduct[YPproduct.length - 1].classification == "å›¢è´­å·²æˆªæ­¢"?"å·²æˆªæ­¢":cartPrice>19900?"å»ç»“ç®—":"æœ€ä½æ¶ˆè´¹é¢ï¿¥199"}}</view></view>
      </view>
      <view slot="tabTitle" class="cart-tab">
        <view class="cross-button" catchtap="closeCart"><sky-icon icon-name="x" icon-size="45" iconColor="var(--low-chroma-l0)"></sky-icon></view>
        <view class="clear-button"><text catchtap="onClearCart"> æ¸…é™¤</text></view>
      </view>
      <!-- è´­ç‰©è½¦å†…è§†å›¾ -->
      <view slot="item">
        <block wx:for="{{ypCart}}" wx:key="ypCartIndex" wx:for-item="cartItem" wx:for-index="cartIndex" wx:if="{{cartFresh}}">
          <block wx:if="{{cartItem.selectedNum != 0}}">
            <view class="cart-item-container">
              <view class="shopping-image">
                <image style="height: 180rpx; width: 180rpx;" src="{{cartItem.thumbnailUrl}}"></image>
              </view>
              <view class="shopping-info-container" style="width:300rpx">
                <text class="shopping-item-title" max-lines="{{2}}" overflow="ellipsis">{{cartItem.prodName}}</text>
                <text class="shopping-item-title" style="font-size:20rpx; color:gray" max-lines="{{3}}" overflow="ellipsis"><block wx:for="{{cartItem.optionName}}" wx:for-index="cartOptionIndex" wx:for-item="cartOptionName">{{cartOptionName}}:{{cartItem.selectedItem[cartOptionIndex]}}</block>
                </text>
                <text class="shopping-item-title" max-lines="{{2}}" overflow="ellipsis" style="color:red">ï¿¥{{cartItem.price/100}}</text>
              </view>
              <view class="stepper-container">
                <t-stepper defaultValue="{{cartItem.selectedNum}}" theme="outline" catch:change="onChangeStepper" data-operated-Item="{{cartItem}}" data-current-index="{{cartIndex}}"/>
              </view>
            </view>
          </block>
        </block>
        <!-- æ€»ç»“æ¡ -->
        <view wx:if="{{ifMaskOn}}" class="cart-bar" style="position: fixed; bottom:0">
          <view class="cart-icon">
            <image style="height: 50rpx; width: 50rpx;" src="https://i.postimg.cc/T2NFhQQ2/We-Chat71b9eb668c0868cde41149edfca8e03e.jpg"></image>
            <view wx:if="{{cartItemCount > 0}}" class="cart-item-count">{{cartItemCount}}</view> <!-- æ–°å¢çš„æ•°å­—å›¾æ ‡ -->
          </view>
          <view class="cart-price">ï¿¥{{cartPrice/100}}</view>
          <view class="check-out-button"><view class="theButton" catchtap="checkOut">{{YPproduct[YPproduct.length - 1].classification == "å›¢è´­å·²æˆªæ­¢"?"å·²æˆªæ­¢":cartPrice>19900?"å»ç»“ç®—":"æœ€ä½æ¶ˆè´¹é¢ï¿¥199"}}</view></view>
        </view>
        <!-- æ¸²æŸ“è¡¥å¿æ¡ -->
        <view class="cart-bar">
        </view>
      </view>
    </mp-half-screen>
  </view>

  <!--èƒŒæ™¯åŠé€æ˜é»‘è‰²è’™ç‰ˆ-->
  <view class = "mask" wx:if="{{ifMaskOn}}" bindtap = "closeCart"></view>  
</view>


